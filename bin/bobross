#!/usr/bin/env ruby
require 'optparse'
require File.expand_path('../../lib/bob_ross/palette/server', __FILE__)


case ARGV.shift.downcase.strip
when "palette"
  directory = ARGV.shift

  if directory.nil? || !File.directory?(directory)
    puts "Usage: bobross palette dir [options...]"
    exit 1
  end
  
  config = {}
  OptionParser.new do |opts|
    opts.on("-sSIZE", "--size=SIZE", OptionParser::DecimalInteger, "Cache size in bytes (Default: 1,073,741,824 bytes, 1GB)") do |arg|
      config[:size] = arg
    end
  end.parse!(ARGV)
  
  BobRoss::PaletteServer.new(directory, config).run
end